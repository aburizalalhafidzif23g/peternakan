<ion-header class="custom-header" translucent="true">
  <ion-toolbar>
    <div class="header-content">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/petugas/perkawinan/riwayat-perkawinan"></ion-back-button>
      </ion-buttons>
      <h2 class="header-title">Input Data Lahir</h2>
      <div style="width: 40px;"></div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true" class="ion-padding">

  <form [formGroup]="lahirForm" (ngSubmit)="simpanData()">

    <!-- Info Card -->
    <div class="info-card">
      <div class="card-header">
        <h3 class="card-title">Data Induk</h3>
        <p class="card-subtitle">{{ hewanInduk?.eartagBetina || 'ID Hewan' }}</p>
      </div>
    </div>

    <!-- Section: Data Anak -->
    <div class="form-section">
      <h3 class="section-title">Data Anak</h3>

      <div class="form-group">
        <label class="form-label">Eartag Anak</label>
        <ion-input
          formControlName="eartagAnak"
          placeholder="Masukkan Eartag Anak"
          class="form-input"
          type="text"
        ></ion-input>
      </div>

      <div class="form-group">
        <label class="form-label">Tanggal Lahir</label>
        <div class="date-input-wrapper">
          <ion-input
            formControlName="tanggalLahir"
            placeholder="Pilih Tanggal"
            class="form-input"
            type="date"
          ></ion-input>
          <ion-icon name="calendar-outline" class="calendar-icon"></ion-icon>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Jenis Kelamin</label>
        <ion-select
          formControlName="jenisKelamin"
          placeholder="Pilih Jenis Kelamin"
          class="form-select"
        >
          <ion-select-option value="Jantan">Jantan</ion-select-option>
          <ion-select-option value="Betina">Betina</ion-select-option>
        </ion-select>
      </div>

      <div class="form-group">
        <label class="form-label">Kondisi Anak</label>
        <ion-select
          formControlName="kondisi"
          placeholder="Pilih Kondisi"
          class="form-select"
        >
          <ion-select-option value="Sehat">Sehat</ion-select-option>
          <ion-select-option value="Cacat">Cacat</ion-select-option>
          <ion-select-option value="Mati">Mati</ion-select-option>
          <ion-select-option value="Prematur">Prematur</ion-select-option>
        </ion-select>
      </div>

      <div class="form-group">
        <label class="form-label">Jenis Ternak Anak</label>
        <ion-select
          formControlName="jenisTernakAnak"
          placeholder="Pilih Jenis Ternak"
          class="form-select"
        >
          <ion-select-option value="Sapi">Sapi</ion-select-option>
          <ion-select-option value="Kerbau">Kerbau</ion-select-option>
        </ion-select>
      </div>

      <div class="form-group">
        <label class="form-label">Rumpun Ternak Anak</label>
        <ion-select
          formControlName="rumpunTernakAnak"
          placeholder="Pilih Rumpun"
          class="form-select"
        >
          <ion-select-option value="PO">PO</ion-select-option>
          <ion-select-option value="Brahman">Brahman</ion-select-option>
          <ion-select-option value="Simental">Simental</ion-select-option>
          <ion-select-option value="Limosin">Limosin</ion-select-option>
          <ion-select-option value="Pasundan">Pasundan</ion-select-option>
          <ion-select-option value="Kerbau Sungai">Kerbau Sungai</ion-select-option>
          <ion-select-option value="Kerbau Lumpur">Kerbau Lumpur</ion-select-option>
        </ion-select>
      </div>
    </div>

    <!-- Section: Pengukuran Anak -->
    <div class="form-section">
      <h3 class="section-title">Pengukuran Anak (kg/cm)</h3>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Berat Badan (kg)</label>
          <ion-input
            formControlName="beratBadan"
            placeholder="0"
            class="form-input"
            type="number"
            step="0.1"
          ></ion-input>
        </div>

        <div class="form-group">
          <label class="form-label">Panjang Badan (cm)</label>
          <ion-input
            formControlName="panjangBadan"
            placeholder="0"
            class="form-input"
            type="number"
            step="0.1"
          ></ion-input>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Tinggi Pundak (cm)</label>
          <ion-input
            formControlName="tinggiPundak"
            placeholder="0"
            class="form-input"
            type="number"
            step="0.1"
          ></ion-input>
        </div>

        <div class="form-group">
          <label class="form-label">Lingkar Dada (cm)</label>
          <ion-input
            formControlName="lingkarDada"
            placeholder="0"
            class="form-input"
            type="number"
            step="0.1"
          ></ion-input>
        </div>
      </div>
    </div>

    <!-- Section: Upload Foto -->
    <div class="form-section">
      <h3 class="section-title">Upload Foto</h3>

      <div class="form-group">
        <label class="form-label">Foto Anak</label>
        <div class="file-upload-container">
          <input
            #fileInput
            type="file"
            accept="image/*"
            (change)="onFileSelected($event)"
            class="file-input"
            hidden
          />
          <button
            type="button"
            (click)="fileInput.click()"
            class="upload-btn"
          >
            <ion-icon name="cloud-upload-outline"></ion-icon>
            <span>Pilih Foto</span>
          </button>
          <p class="file-name" *ngIf="fotoFileName">
            {{ fotoFileName }}
          </p>
        </div>
      </div>
    </div>

    <!-- Section: Catatan -->
    <div class="form-section">
      <h3 class="section-title">Catatan Tambahan</h3>

      <div class="form-group">
        <label class="form-label">Catatan</label>
        <ion-textarea
          formControlName="catatan"
          placeholder="Tambahkan catatan jika ada"
          class="form-textarea"
          rows="3"
        ></ion-textarea>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-section">
      <button 
        type="button"
        class="btn btn-secondary"
        (click)="batal()"
      >
        <ion-icon name="close-outline"></ion-icon>
        <span>Batal</span>
      </button>

      <button 
        type="submit"
        class="btn btn-primary"
        [disabled]="!lahirForm.valid"
      >
        <ion-icon name="save-outline"></ion-icon>
        <span>Simpan Data Lahir</span>
      </button>
    </div>

  </form>

  <!-- Info Section -->
  <div class="info-section">
    <ion-icon name="information-circle-outline" class="info-icon"></ion-icon>
    <p class="info-text">
      Pastikan semua data telah terisi dengan benar sebelum menyimpan.
    </p>
  </div>

</ion-content>